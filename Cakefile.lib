/*
 *			C A K E F I L E . L I B
 *
 *  Cakefile for building a single library archive.
 *  Symbol PRODUCTS should be name of a single library
 *
 *  Author -
 *	Michael John Muuss
 *  
 *  Source -
 *	SECAD/VLD Computing Consortium, Bldg 394
 *	The U. S. Army Ballistic Research Laboratory
 *	Aberdeen Proving Ground, Maryland  21005-5066
 *  
 *  Distribution Status -
 *	Public Domain, Distribution Unlimitied.
 *
 *  $Header: /usr/Backup/upgrade/brlcad/brlcad/Cakefile.lib,v 9.2 1990-10-04 21:30:10 mike Exp $
 */

#ifndef PRODUCTS
#	include "Symbol PRODUCTS required to make library"
#endif
#ifndef SRCDIR
#	include "Symbol SRCDIR required"
#endif
#ifndef OBJ
#	include "Symbol OBJ required"
#endif

#ifndef EXTRA_OBJ
#	define	EXTRA_OBJ	/**/
#endif

#ifndef EXTRA_SETUP
#	define	EXTRA_SETUP	/**/
#endif

PRODUCTS::	EXTRA_OBJ OBJ
	rm -f PRODUCTS; EXTRA_SETUP
	AR u PRODUCTS OBJ EXTRA_OBJ
	RANLIB PRODUCTS

%.o&:	SRCDIR,,%,o			if exist ../SRCDIR/%.c

%9,,%,o&:	../%9/%.c [[cakeinclude -i INCDIR -s ../%9 ../%9/%.c]] \
					if exist ../%9/%.c
	CC CFLAGS -c ../%9/%.c

/* Override the modes for the library */
#undef	BINDIR
#undef	BINPERM
#define	BINDIR	LIBDIR
#define	BINPERM	LIBPERM

/* If RANLIB is specified, be sure it is run when installing libraries */
#define AFTERINSTALL	RANLIB
