/*
			burst/Cakefile

	Author:		Gary S. Moss
			U. S. Army Ballistic Research Laboratory
			Aberdeen Proving Ground
			Maryland 21005-5066

	$Header: /usr/Backup/upgrade/brlcad/brlcad/burst/Cakefile,v 1.9 1991-08-26 11:02:05 moss Exp $ (BRL)

	For BRLCAD 4.0, add LIBFB_LIBES after LIBFB in list of libraries under
	PRODUCTS rule below.
 */
#define CONFIGDEFS	LGT_CONFIG -I. /*-DDEBUG*/

#define SRCDIR	burst
#define PRODUCTS	burst
#define	SRCSUFF	.c
#define MANSECTION	1
#define FILES	burst error fb glob grid gridrotate idents\
		paint plot prnt trie ui\
		Hm HmGetc HmGlob Sc Tc
#include "../Cakefile.defs"
#include "../Cakefile.prog"

/* Explicit composition of each product */
PRODUCTS:	OBJ
	CC LDFLAGS -o burst OBJ LIB_PRE''LIBRT RT_LIBES LIB_PRE''LIBFB LIBTERMLIB LIBES -lm

all&: PRODUCTS

test&:	all tfiles/ktank.g
	./burst -b < tfiles/ktank.in
	@if test $? -ne 0 \
	then	echo "Test failed."; exit 1 \
	fi
	diff tfiles/ktank.burst tfiles/ktank.burst.bak
	@if test $? -ne 0 \
	then	echo "Test failed."; exit 1 \
	fi
	diff tfiles/ktank.shotlines tfiles/ktank.shotlines.bak
	@if test $? -ne 0 \
	then	echo "Test failed."; exit 1 \
	fi
	@echo "Tested OK."

untest&:
	rm -f tfiles/ktank.burst tfiles/ktank.shotlines tfiles/ktank.plot \
		tfiles/ktank.pix tfiles/ktank.g tfiles/ktank.log

tfiles/ktank.g:
	asc2g < tfiles/ktank.asc > tfiles/ktank.g

#include "../Cakefile.rules"
